2025-03-30 09:58:25,126 INFO: 执行SQL查询: 
        SELECT date, department, outpatient_count, inpatient_count, 
               surgery_count, emergency_count, consultation_count, total_count
        FROM department_workload
        WHERE date BETWEEN ? AND ?
         ORDER BY date, department 参数: ['2024-03-30', '2025-03-30'] [in /Volumes/文件资料/medicalman/app/routes/analytics_routes.py:554]
2025-03-30 09:58:25,161 INFO: 科室工作量数据查询成功，返回 5475 条记录 [in /Volumes/文件资料/medicalman/app/routes/analytics_routes.py:576]
2025-03-30 09:58:25,207 INFO: 请求科室工作量数据 - 开始: 2024-03-30, 结束: 2025-03-30, 科室: [] [in /Volumes/文件资料/medicalman/app/routes/analytics_routes.py:534]
2025-03-30 09:58:25,208 INFO: 执行SQL查询: 
        SELECT date, department, outpatient_count, inpatient_count, 
               surgery_count, emergency_count, consultation_count, total_count
        FROM department_workload
        WHERE date BETWEEN ? AND ?
         ORDER BY date, department 参数: ['2024-03-30', '2025-03-30'] [in /Volumes/文件资料/medicalman/app/routes/analytics_routes.py:554]
2025-03-30 09:58:25,234 INFO: 科室工作量数据查询成功，返回 5475 条记录 [in /Volumes/文件资料/medicalman/app/routes/analytics_routes.py:576]
2025-03-30 09:59:01,084 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:196]
2025-03-30 09:59:01,084 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:111]
2025-03-30 09:59:01,085 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:114]
2025-03-30 09:59:01,085 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:116]
2025-03-30 09:59:01,085 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:117]
2025-03-30 09:59:01,087 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:120]
2025-03-30 09:59:01,097 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:126]
2025-03-30 10:01:25,649 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:01:25,649 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:01:25,649 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
2025-03-30 10:01:25,649 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:132]
2025-03-30 10:01:25,650 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:133]
2025-03-30 10:01:25,651 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:136]
2025-03-30 10:01:25,661 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:142]
2025-03-30 10:04:34,151 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:04:34,151 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:04:34,151 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
2025-03-30 10:04:34,151 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:132]
2025-03-30 10:04:34,152 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:133]
2025-03-30 10:04:34,153 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:136]
2025-03-30 10:04:34,163 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:142]
2025-03-30 10:04:50,108 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:183]
2025-03-30 10:05:31,804 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:05:31,805 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:05:31,805 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
2025-03-30 10:05:31,805 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:132]
2025-03-30 10:05:31,805 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:133]
2025-03-30 10:05:31,807 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:136]
2025-03-30 10:05:31,816 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:142]
2025-03-30 10:05:45,952 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:183]
2025-03-30 10:06:39,007 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:06:39,007 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:06:39,007 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
2025-03-30 10:06:39,007 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:132]
2025-03-30 10:06:39,008 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:133]
2025-03-30 10:06:39,009 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:136]
2025-03-30 10:06:39,019 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:142]
2025-03-30 10:06:53,950 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:204]
2025-03-30 10:07:22,931 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:07:22,931 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:07:22,932 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
2025-03-30 10:07:22,932 INFO: 数据库路径: /Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:132]
2025-03-30 10:07:22,932 INFO: 数据库路径是否存在: True [in /Volumes/文件资料/medicalman/app/__init__.py:133]
2025-03-30 10:07:22,935 INFO: 数据库初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:136]
2025-03-30 10:07:22,945 INFO: 演示数据初始化完成 [in /Volumes/文件资料/medicalman/app/__init__.py:142]
2025-03-30 10:08:10,068 INFO: 获取仪表盘数据: date_range=week, start_date=2025-03-22, end_date=2025-03-28 [in /Volumes/文件资料/medicalman/app/routes/dashboard_routes.py:607]
2025-03-30 10:08:20,470 INFO: 用户查询: {"timestamp": "2025-03-30 10:08:20", "username": "guest", "query": "看看数据库有什么", "success": null} [in /Volumes/文件资料/medicalman/app/utils/logger.py:82]
2025-03-30 10:08:20,472 INFO: 查询附件: [] [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:77]
2025-03-30 10:08:20,473 INFO: 知识库设置: {'data_source': 'auto', 'tables': {'outpatient': True, 'target': True, 'drg': True}, 'dimensions': {'department': True, 'specialty': True, 'target_completion': True, 'trend': True}, 'time_range': 'all'} [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:78]
2025-03-30 10:08:22,898 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:204]
2025-03-30 10:08:22,898 INFO: 查询处理完成，耗时: 2.42秒 [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:86]
2025-03-30 10:11:28,561 INFO: 用户查询: {"timestamp": "2025-03-30 10:11:28", "username": "guest", "query": "看看数据库有什么", "success": null} [in /Volumes/文件资料/medicalman/app/utils/logger.py:82]
2025-03-30 10:11:28,563 INFO: 查询附件: [] [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:77]
2025-03-30 10:11:28,564 INFO: 知识库设置: {'data_source': 'auto', 'tables': {'outpatient': True, 'target': True, 'drg': True}, 'dimensions': {'department': True, 'specialty': True, 'target_completion': True, 'trend': True}, 'time_range': 'all'} [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:78]
2025-03-30 10:11:31,129 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:204]
2025-03-30 10:11:31,129 INFO: 查询处理完成，耗时: 2.56秒 [in /Volumes/文件资料/medicalman/app/routes/ai_chat_routes.py:86]
2025-03-30 10:11:57,124 ERROR: 生成SQL查询失败: get_database_schema() takes 0 positional arguments but 1 was given [in /Volumes/文件资料/medicalman/app/services/sql_service.py:204]
2025-03-30 10:13:39,355 INFO: 医疗工作量系统启动 [in /Volumes/文件资料/medicalman/app/__init__.py:212]
2025-03-30 10:13:39,355 INFO: 开始初始化数据库... [in /Volumes/文件资料/medicalman/app/__init__.py:127]
2025-03-30 10:13:39,355 INFO: 数据库URI: sqlite:////Volumes/文件资料/medicalman/instance/medical_workload.db [in /Volumes/文件资料/medicalman/app/__init__.py:130]
